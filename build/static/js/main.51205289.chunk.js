(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{222:function(e,t,c){},223:function(e,t,c){},351:function(e,t,c){"use strict";c.r(t);var n,r,i=c(0),a=c.n(i),o=c(45),s=c.n(o),l=(c(222),c(89)),j=c(5),d=(c.p,c(223),c(95)),b=c(10),u=c(90),O=c.n(u),x=c(116),h=c(371),p=c(372),m=c(386),f=c(72),g=c(37),v=c(60),S=c.n(v),y=c(50),w=c(364),C=c(366),A=c(367),q=c(73),k=c(368),R=c(369),I=c(3),E=["label","textarea","select","controlProps"],N=function(e){var t=e.label,c=e.textarea,n=e.select,r=e.controlProps,i=void 0===r?{}:r,a=Object(l.a)(e,E),o=Object(f.c)(a),s=Object(j.a)(o,2),d=s[0],b=s[1],u=c?w.a:n?C.a:A.a;return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(q.a,Object(y.a)(Object(y.a)({isInvalid:b.error&&b.touched},i),{},{children:[Object(I.jsx)(k.a,{children:t}),Object(I.jsx)(u,Object(y.a)(Object(y.a)({},d),a)),Object(I.jsx)(R.a,{children:b.error})]}))})},F=c(370),D=function(e){var t=e.text;return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(F.a,{textAlign:"center",padding:["5","10"],as:"h3",size:"lg",children:t})})},V=c(204),P=c(48),z=c(197),M=function(){var e=Object(i.useRef)();Object(i.useEffect)((function(){new z.a({apiKey:"AIzaSyBfBVNl7EUFkj6i1JXdX6dtb5UAbuqIqqM",version:"weekly"}).load().then((function(t){console.log("API LOADED");var c={lat:-12.23611796591263,lng:-76.91001322915511},n=new t.maps.Map(document.getElementById("map"),{center:c,zoom:17}),r=new t.maps.Marker({position:c,map:n}),i=new t.maps.DirectionsService,a=new t.maps.DirectionsRenderer;a.setMap(n),e.current={ds:i,dr:a,parkCoords:c,map:n,google:t,parkMarker:r}}))}),[]);return Object(I.jsxs)("div",{children:[Object(I.jsx)(D,{text:"Mapa"}),Object(I.jsx)(h.a,{pb:"2",textAlign:"end",children:Object(I.jsx)(m.a,{onClick:function(){var t=e.current,c=t.ds,n=t.dr,r=t.parkCoords,i=(t.map,t.google,t.parkMarker);navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,a={origin:{lat:t.latitude,lng:t.longitude},destination:r,travelMode:"DRIVING"};c.route(a,(function(e,t){"OK"==t&&(i.setMap(null),n.setDirections(e))}))}))},colorScheme:"teal",children:"Trazar ruta"})}),Object(I.jsx)("div",{id:"map",style:{height:"500px"}})]})},L=function(e){var t=e.toast,c=Object(P.c)((function(e){return e.user})).isAuthenticated,r=Object(b.f)();return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(D,{text:"Formulario"}),Object(I.jsx)(h.a,{border:"3px solid gray",borderColor:"teal",borderTop:"none",p:"7",children:Object(I.jsx)(f.b,{initialValues:{fullName:"",reason:"",position:"",need:"",phone:"",message:"",email:""},validationSchema:g.b({fullName:g.c().required("Requerido"),reason:g.c().required("Requerido"),position:g.c().required("Requerido"),need:g.c().required("Requerido"),phone:g.a().required("Requerido"),message:g.c().required("Requerido"),email:g.c().email("correo no valido").required("Requerido")}),onSubmit:function(){var e=Object(x.a)(O.a.mark((function e(i,a){var o,s,l,j;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.setSubmitting,s=a.resetForm,e.next=3,S.a.post("/api/forms",i);case 3:l=e.sent,j=l.data,o(!1),n.emit("new-form",j),t({title:"Formulario enviado",status:"success",isClosable:!0}),c?r("/forms"):s();case 9:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),children:function(e){return Object(I.jsxs)(f.a,{noValidate:!0,children:[Object(I.jsxs)(p.a,{templateColumns:{sm:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},gap:4,width:"100%",children:[Object(I.jsx)(p.b,{colSpan:1,children:Object(I.jsx)(N,{label:"Nombre y Apellido",name:"fullName",type:"text",placeholder:"Nombre y Apellido",controlProps:{isRequired:!0}})}),Object(I.jsx)(p.b,{colSpan:1,children:Object(I.jsx)(N,{label:"Raz\xf3n Social",name:"reason",type:"text",placeholder:"Raz\xf3n Social",controlProps:{isRequired:!0}})}),Object(I.jsx)(p.b,{colSpan:1,children:Object(I.jsx)(N,{label:"Cargo",name:"position",type:"text",placeholder:"Cargo",controlProps:{isRequired:!0}})}),Object(I.jsx)(p.b,{colSpan:1,children:Object(I.jsxs)(N,{select:!0,label:"Necesidad",name:"need",placeholder:"Necesidad",controlProps:{isRequired:!0},children:[Object(I.jsx)("option",{children:"Atracci\xf3n y Selecci\xf3n"}),Object(I.jsx)("option",{children:"Evaluaci\xf3n Psicolaboral"}),Object(I.jsx)("option",{children:"Capacitaci\xf3n & E-Learning"}),Object(I.jsx)("option",{children:"Consultor\xeda & Desarrollo"}),Object(I.jsx)("option",{children:"Outplacement"})]})}),Object(I.jsx)(p.b,{colSpan:1,children:Object(I.jsx)(N,{label:"Celular",name:"phone",type:"text",placeholder:"Celular",controlProps:{isRequired:!0}})}),Object(I.jsx)(p.b,{rowSpan:2,colSpan:1,children:Object(I.jsx)(N,{textarea:!0,label:"Mensaje",name:"message",type:"text",placeholder:"Mensaje",flex:"1",controlProps:{isRequired:!0,display:"flex",flexDirection:"column",height:"100%"}})}),Object(I.jsx)(p.b,{colSpan:1,children:Object(I.jsx)(N,{label:"Email",name:"email",type:"text",placeholder:"Email",controlProps:{isRequired:!0}})})]}),Object(I.jsx)("br",{}),Object(I.jsx)(m.a,{type:"submit",isFullWidth:!0,isLoading:e.isSubmitting,loadingText:"Submitting",colorScheme:"teal",variant:"outline",children:"Submit"})]})}})}),Object(I.jsx)("div",{style:{width:"100%"},children:Object(I.jsx)(M,{})})]})},_=c(373),B=function(e){var t=e.forms,c=Object(b.f)();return Object(I.jsxs)("div",{children:[Object(I.jsx)(D,{text:"Formularios"}),Object(I.jsxs)(_.a,{colorScheme:"teal",variant:"striped",children:[Object(I.jsx)(_.e,{children:Object(I.jsxs)(_.f,{children:[Object(I.jsx)(_.d,{children:"Nombre y Apellido"}),Object(I.jsx)(_.d,{children:"Razon Social"}),Object(I.jsx)(_.d,{children:"Necesidad"}),Object(I.jsx)(_.d,{children:"..."})]})}),Object(I.jsx)(_.b,{children:t.map((function(e){return Object(I.jsxs)(_.f,{cursor:"pointer",onClick:function(){return c(e._id)},children:[Object(I.jsx)(_.c,{children:e.fullName}),Object(I.jsx)(_.c,{children:e.reason}),Object(I.jsx)(_.c,{children:e.need}),Object(I.jsx)(_.c,{children:"..."})]},e._id)}))})]})]})},T=c(385),G=c(382),J=c(387),U=c(379),W=c(384),K=function(e){var t=e.isOpen,c=(e.onOpen,e.onClose),n=e.title,r=e.onSubmit,i=e.children;return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(W.a,{size:"lg",isOpen:t,onClose:c,children:[Object(I.jsx)(W.g,{}),Object(I.jsxs)(W.d,{children:[Object(I.jsx)(W.f,{children:n}),Object(I.jsx)(W.c,{}),Object(I.jsx)(W.b,{children:i}),Object(I.jsxs)(W.e,{children:[Object(I.jsx)(m.a,{colorScheme:"blue",mr:3,onClick:c,children:"Close"}),r&&Object(I.jsx)(m.a,{onSubmit:r,variant:"ghost",children:"Secondary Action"})]})]})]})})},X=c(376),H=c(207),Q=c(391),Y=c(377),Z=c(378),$=c(4),ee=c(80),te=function(){for(var e=arguments.length,t=new Array(e),c=0;c<e;c++)t[c]=arguments[c];return{headers:Object(y.a)({Authorization:"Bearer "+localStorage.getItem("token")},t)}},ce=Object(ee.c)("SEND_VALIDATION",(function(e,t){return S.a.get("/api/auth/validate",te()).then((function(e){return e.data}))})),ne=Object(ee.c)("SEND_LOGIN",(function(e){return S.a.post("/api/auth/login",e).then((function(e){return e.data}))})),re=(Object(ee.b)("SEND_LOGOUT"),Object(ee.d)({isValidated:!localStorage.getItem("token"),isAuthenticated:!1},(r={},Object($.a)(r,ne.fulfilled,(function(e,t){var c=t.payload;return localStorage.setItem("token",c.token),n.emit("get-forms"),Object(y.a)(Object(y.a)({},e),{},{isAuthenticated:!0},c.user)})),Object($.a)(r,ne.rejected,(function(e,t){e.isAuthenticated=!1})),Object($.a)(r,ce.fulfilled,(function(e,t){var c=t.payload;return Object(y.a)({isValidated:!0,isAuthenticated:!0},c.user)})),Object($.a)(r,ce.rejected,(function(e,t){return localStorage.removeItem("token"),{isValidated:!0,isAuthenticated:!1}})),r)));function ie(e){var t=e.onClose,c=Object(P.b)();return Object(I.jsx)(X.a,{align:"center",justify:"center",bg:Object(H.d)("gray.50","gray.800"),children:Object(I.jsxs)(Q.a,{spacing:8,mx:"auto",maxW:"lg",py:12,px:6,children:[Object(I.jsxs)(Q.a,{align:"center",children:[Object(I.jsx)(F.a,{fontSize:"4xl",children:"Sign in to your account"}),Object(I.jsxs)(Y.a,{fontSize:"lg",color:"gray.600",children:["to enjoy all of our cool ",Object(I.jsx)(Z.a,{color:"blue.400",children:"features"})," \u270c\ufe0f"]})]}),Object(I.jsx)(h.a,{rounded:"lg",bg:Object(H.d)("white","gray.700"),boxShadow:"lg",p:8,children:Object(I.jsx)(f.b,{initialValues:{email:"",password:""},validationSchema:g.b({email:g.c().email("Invalid email address").required("Required"),password:g.c().required("Enter your password")}),onSubmit:function(e,n){c(ne(e)).then((function(e){e.error?(n.setSubmitting(!1),n.setFieldValue("password","",!1)):t()}))},children:function(e){return Object(I.jsx)(f.a,{noValidate:!0,children:Object(I.jsxs)(Q.a,{spacing:4,children:[Object(I.jsx)(N,{label:"Email",name:"email",type:"text"}),Object(I.jsx)(N,{label:"Password",name:"password",type:"password"}),Object(I.jsx)(Q.a,{spacing:10,children:Object(I.jsx)(m.a,{isLoading:e.isSubmitting,type:"submit",bg:"blue.400",color:"white",_hover:{bg:"blue.500"},children:"Sign in"})})]})})}})})]})})}var ae=["isAuthenticated"],oe=function(){var e=Object(b.f)(),t=Object(P.c)((function(e){return e.user})),c=t.isAuthenticated,n=Object(l.a)(t,ae),r=Object(U.a)(),i=r.isOpen,a=r.onOpen,o=r.onClose;return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(K,{isOpen:i,onOpen:a,onClose:o,children:Object(I.jsx)(ie,{onClose:o})}),Object(I.jsxs)(h.a,{width:["sm","xl"],margin:"0 auto",children:[Object(I.jsx)(h.a,{pb:"5",textAlign:"end",children:c?Object(I.jsx)(F.a,{as:"h4",size:"md",children:n.username}):Object(I.jsx)(m.a,{colorScheme:"teal",onClick:a,children:"Login"})}),Object(I.jsx)(J.c,{colorScheme:"teal",isFitted:!0,children:Object(I.jsxs)(J.b,{children:[Object(I.jsx)(J.a,{onClick:function(){return e("/form")},children:"Formulario"}),Object(I.jsx)(J.a,{isDisabled:!c,onClick:function(){return e("/forms")},children:"Formularios"})]})})]})]})},se=c(380),le=c(381),je=function(){var e=Object(i.useState)({}),t=Object(j.a)(e,2),c=t[0],n=t[1],r=Object(b.f)(),a=Object(b.g)().formId;return Object(i.useEffect)((function(){Object(x.a)(O.a.mark((function e(){var t,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("/api/forms/".concat(a),te());case 2:t=e.sent,c=t.data,n(c);case 5:case"end":return e.stop()}}),e)})))()}),[]),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(D,{text:"Info"}),Object(I.jsx)(se.a,{spacing:3,children:Object.keys(c).map((function(e){return Object(I.jsxs)(se.b,{children:[Object(I.jsx)(le.a,{mr:"4",variant:"solid",colorScheme:"teal",children:e}),c[e]]},e)}))}),Object(I.jsx)("br",{}),Object(I.jsx)(h.a,{display:"flex",width:"100%",justifyContent:"end",children:Object(I.jsx)(m.a,{onClick:function(){return r("/forms")},colorScheme:"teal",variant:"outline",children:"Volver"})})]})},de=["isAuthenticated","isValidated"];var be=function(){var e=Object(T.a)(),t=Object(i.useState)([]),c=Object(j.a)(t,2),r=c[0],a=c[1],o=Object(P.b)(),s=Object(P.c)((function(e){return e.user})),u=s.isAuthenticated,O=s.isValidated;return Object(l.a)(s,de),Object(i.useEffect)((function(){(n=Object(V.a)("")).emit("get-forms")}),[]),Object(i.useEffect)((function(){u&&n.on("new-forms",(function(t,c){a(t),!c&&e({title:"nuevo formulario registrado",status:"info",isClosable:!0})}))}),[u]),Object(i.useEffect)((function(){O||o(ce())}),[]),O?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(d.a,{children:[Object(I.jsx)(h.a,{pt:["5","10"],children:Object(I.jsx)(oe,{})}),Object(I.jsx)(G.a,{maxW:"container.lg",centerContent:!0,children:Object(I.jsxs)(b.c,{children:[Object(I.jsx)(b.a,{index:!0,element:Object(I.jsx)(L,{})}),Object(I.jsx)(b.a,{path:"/form",element:Object(I.jsx)(L,{toast:e})}),Object(I.jsx)(b.a,{path:"/forms",element:Object(I.jsx)(B,{forms:r})}),Object(I.jsx)(b.a,{path:"/forms/:formId",element:Object(I.jsx)(je,{})})]})})]}),Object(I.jsx)("br",{}),Object(I.jsx)("br",{})]}):Object(I.jsx)("p",{children:"VALIDANDO"})},ue=Object(ee.a)({reducer:{user:re}}),Oe=c(388);s.a.render(Object(I.jsx)(a.a.StrictMode,{children:Object(I.jsx)(P.a,{store:ue,children:Object(I.jsx)(Oe.a,{children:Object(I.jsx)(be,{})})})}),document.getElementById("root"))}},[[351,1,2]]]);
//# sourceMappingURL=main.51205289.chunk.js.map